import{q as ee,W as K,r as c,j as e,Y as se,a as $,d as ae}from"./app-BbJUaZt7.js";import{T as te,a as ne}from"./toaster-D0flyv3P.js";import{I as o}from"./InputError-NIrKKB-2.js";import{B as f}from"./button-UwysrHzP.js";import{C as w,a as S,b as D,d as M}from"./card-BdKu3Mnk.js";import{I as h}from"./input-Cqv19wrC.js";import{L as n}from"./label-DsFCVgVZ.js";import{S as y,a as N,b as v,c as _,d as i}from"./select-Dfz_2K3P.js";import{S as le}from"./SingleImageUploader-DEOVZYoh.js";import{t as E}from"./use-toast-DB_HyPaF.js";import{D as B,a as Q,b as H,c as X,d as Z,e as re}from"./dialog-JG440Rn_.js";import"./index-B95Fhcwf.js";import"./index-DJQKv4up.js";import"./index-CXD2mk9O.js";import"./x-Dzg8clAH.js";import"./createLucideIcon-CPw1ASD4.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./index-8PO45I_3.js";import"./index-BM2NL8vz.js";import"./index-C1KCpwI9.js";import"./check-DjI-pqQE.js";import"./index-BAXoe19z.js";const ie=()=>{var m;const r=ee().props.packages,{data:a,setData:l,errors:t,post:b,processing:u,clearErrors:j}=K({name:"",phone:"",occupation:"",gender:"",marital_status:"",date_of_birth:new Date(new Date().setFullYear(new Date().getFullYear()-20)).toISOString().split("T")[0],address:"",preferred_time:"",payment_proof:"",membership_package_id:r[0].id,months:1,photo:null,emergency_person_name:"",emergency_person_phone:""}),[C,g]=c.useState(0),[P,x]=c.useState(0),[T,O]=c.useState(0),[V,I]=c.useState(0),[q,L]=c.useState(0),[G,U]=c.useState(0),Y=new URLSearchParams(window.location.search),[J,R]=c.useState(Y.get("form")==="register"),W=()=>{const s=r.find(d=>d.id===a.membership_package_id);if(s){const d=Number(s.admission_amount)||0,p=Number(s.monthly_amount)||0,F=p*a.months,A=d+F;let k=0;a.months===3?k=Number(s.discount_quarterly)||0:a.months===6?k=Number(s.discount_half_yearly)||0:a.months===12&&(k=Number(s.discount_yearly)||0),g(d),x(p),O(F),I(A),L(k),U(A-k)}};c.useEffect(()=>{W()},[a.membership_package_id,a.months]);const z=s=>{s.preventDefault(),j(),b("/member/store/apply",{onSuccess:()=>{R(!1),E({description:"Membership registration application submitted, pending admin approval...",duration:5e3})}})};return e.jsxs(B,{open:J,onOpenChange:R,children:[e.jsxs(Q,{children:[e.jsx(f,{className:"hidden md:block w-full",color:"primary",type:"submit",disabled:u,children:"Register Membership"}),e.jsx(f,{className:"w-full md:hidden",size:"sm",color:"primary",type:"submit",disabled:u,children:"Register Membership"})]}),e.jsxs(H,{className:"max-w-7xl w-[97%] max-h-[97vh] overflow-auto rounded",children:[e.jsx(X,{children:e.jsx(Z,{children:"Register a Membership"})}),e.jsx("div",{className:"w-full mx-auto space-y-6",children:e.jsx("form",{onSubmit:z,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"lg:col-span-6 xl:col-span-7 2xl:col-span-8 space-y-6",children:[e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(D,{className:"text-lg",children:"Member Information"})}),e.jsxs(M,{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("div",{className:"w-32",children:[e.jsx(le,{onImageUpload:s=>l("photo",s),className:"aspect-square px-2 w-full",label:"Upload Member Photo"}),e.jsx(o,{message:t.photo,className:"mt-2"})]}),e.jsxs("div",{className:"grow",children:[e.jsx(n,{htmlFor:"name",children:"Name"}),e.jsx(h,{id:"name",value:a.name,onChange:s=>{const d=s.target.value.toLowerCase().replace(/\b\w/g,p=>p.toUpperCase());l("name",d)},placeholder:"Enter member's name",required:!0}),e.jsx(o,{message:t.name,className:"mt-2"}),e.jsx(n,{htmlFor:"address",children:"Address"}),e.jsx(h,{id:"address",value:a.address,onChange:s=>l("address",s.target.value),placeholder:"Enter address",required:!0}),e.jsx(o,{message:t.address,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"phone",children:"Phone"}),e.jsx(h,{id:"phone",value:a.phone,onChange:s=>l("phone",s.target.value),placeholder:"Enter phone number",required:!0,maxLength:10,minLength:10}),e.jsx(o,{message:t.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"occupation",children:"Occupation"}),e.jsxs(y,{defaultValue:a.occupation,onValueChange:s=>l("occupation",s),children:[e.jsx(N,{id:"occupation",children:e.jsx(v,{placeholder:"Select occupation"})}),e.jsxs(_,{children:[e.jsx(i,{value:"private-job",children:"Private Job"}),e.jsx(i,{value:"government-job",children:"Government Job"}),e.jsx(i,{value:"business",children:"Business"}),e.jsx(i,{value:"student",children:"Student"}),e.jsx(i,{value:"housewife",children:"House Wife"}),e.jsx(i,{value:"other",children:"Other"})]})]}),e.jsx(o,{message:t.occupation,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Gender"}),e.jsxs(y,{defaultValue:a.gender,onValueChange:s=>l("gender",s),children:[e.jsx(N,{id:"gender",children:e.jsx(v,{placeholder:"Select gender"})}),e.jsxs(_,{children:[e.jsx(i,{value:"male",children:"Male"}),e.jsx(i,{value:"female",children:"Female"})]})]}),e.jsx(o,{message:t.gender,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Marital Status"}),e.jsxs(y,{defaultValue:a.marital_status,onValueChange:s=>l("marital_status",s),children:[e.jsx(N,{id:"marital_status",children:e.jsx(v,{placeholder:"Select marital status"})}),e.jsxs(_,{children:[e.jsx(i,{value:"single",children:"Single"}),e.jsx(i,{value:"married",children:"Married"})]})]}),e.jsx(o,{message:t.marital_status,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"date_of_birth",children:"Date of Birth"}),e.jsx(h,{id:"date_of_birth",type:"date",value:a.date_of_birth,onChange:s=>l("date_of_birth",s.target.value),required:!0}),e.jsx(o,{message:t.date_of_birth,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"preferred_time",children:"Preferred Time"}),e.jsx(h,{id:"preferred_time",type:"time",value:a.preferred_time,onChange:s=>l("preferred_time",s.target.value),required:!0}),e.jsx(o,{message:t.preferred_time,className:"mt-2"})]})]})]})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(D,{className:"text-lg",children:"Membership and Payment Details"})}),e.jsxs(M,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"membership_package",children:"Membership Package"}),e.jsxs(y,{defaultValue:a.membership_package_id.toString(),onValueChange:s=>l("membership_package_id",Number(s)),children:[e.jsx(N,{id:"membership_package",children:e.jsx(v,{placeholder:"Select membership package"})}),e.jsx(_,{children:r.map(s=>e.jsx(i,{value:s.id.toString(),children:s.package_name},s.id))})]}),e.jsx(o,{message:t.membership_package_id,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("div",{className:"grow",children:[e.jsx(n,{htmlFor:"months",children:"Initial Registration Months"}),e.jsxs(y,{defaultValue:a.months.toString(),onValueChange:s=>l("months",Number(s)),children:[e.jsx(N,{id:"months",children:e.jsx(v,{placeholder:"Select membership months"})}),e.jsxs(_,{children:[e.jsx(i,{value:"1",children:"1 Month"}),e.jsx(i,{value:"3",children:"3 Months"}),e.jsx(i,{value:"6",children:"6 Months"}),e.jsx(i,{value:"12",children:"1 Year"})]})]}),e.jsx(o,{message:t.months,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"payment_proof",children:"Payment Proof"}),e.jsx(h,{type:"file",accept:"image/*",onChange:s=>{l("payment_proof",s.target.files?s.target.files[0]:"")}}),e.jsx(o,{message:t.payment_proof})]})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-6 xl:col-span-5 2xl:col-span-4 space-y-6",children:[e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(D,{className:"text-lg",children:"Emergency Information"})}),e.jsxs(M,{className:"gap-2 flex flex-col flex-wrap",children:[e.jsxs("div",{className:"grow",children:[e.jsx(n,{htmlFor:"emergency_person_name",children:"Person Name"}),e.jsx(h,{id:"emergency_person_name",value:a.emergency_person_name,onChange:s=>{const d=s.target.value.toLowerCase().replace(/\b\w/g,p=>p.toUpperCase());l("emergency_person_name",d)},placeholder:"Enter emergency contact person name"}),e.jsx(o,{message:t.emergency_person_name,className:"mt-2"})]}),e.jsxs("div",{className:"grow",children:[e.jsx(n,{htmlFor:"emergency_person_phone",children:"Phone"}),e.jsx(h,{id:"emergency_person_phone",value:a.emergency_person_phone,onChange:s=>l("emergency_person_phone",s.target.value),placeholder:"Enter emergency contact phone number"}),e.jsx(o,{message:t.emergency_person_phone,className:"mt-2"})]})]})]}),e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(D,{className:"text-lg",children:"Pricing and Payment"})}),e.jsxs(M,{children:[e.jsx("div",{className:"text-start mb-3",children:e.jsx("strong",{children:(m=r.find(s=>s.id===a.membership_package_id))==null?void 0:m.package_name})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{children:"Admission Amount"}),e.jsxs("span",{children:["Rs ",C]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{children:"Monthly Amount"}),e.jsxs("span",{children:["Rs ",P]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{children:"Total Months"}),e.jsxs("span",{children:[a.months," Months"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{children:"Total Monthly Fees"}),e.jsxs("span",{children:["Rs ",T]})]}),e.jsx("div",{className:"border mb-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{children:"Gross Package Amount"}),e.jsxs("span",{children:["Rs ",V]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{children:"Package Discount"}),e.jsxs("span",{children:["- Rs ",q]})]}),e.jsx("div",{className:"border mb-2"}),e.jsxs("strong",{className:"flex justify-between",children:[e.jsx(n,{children:"Net Amount"}),e.jsxs("span",{children:["Rs ",G]})]}),e.jsx(f,{type:"submit",disabled:u,className:"w-full mt-3",children:u?"Processing...":"Apply for registration"})]})]})]})]})})})]})]})},ce=ie,oe=({member:r,open:a,onClose:l})=>{const{data:t,setData:b,reset:u,errors:j,post:C,processing:g,clearErrors:P}=K({selected_months:1,payment_proof:null}),[x,T]=c.useState(0),[O,V]=c.useState(0),[I,q]=c.useState(0),[L,G]=c.useState(0),[U,Y]=c.useState(0),[J,R]=c.useState(""),W=m=>{const s=new Date(r.payment_expiry_date);return new Date(s.setMonth(s.getMonth()+m)).toISOString().split("T")[0]};c.useEffect(()=>{const m=Number(r.membership_package.monthly_amount)||0,s=m*t.selected_months;let d=0;t.selected_months===3?d=Number(r.membership_package.discount_quarterly)||0:t.selected_months===6?d=Number(r.membership_package.discount_half_yearly)||0:t.selected_months===12&&(d=Number(r.membership_package.discount_yearly)||0);const p=s,F=p-d;T(m),V(s),q(p),G(d),Y(Math.max(F,0));const A=W(t.selected_months);R(A)},[t.selected_months]);const z=m=>{m.preventDefault(),P(),C(route("renewal.public.store",r.id),{onSuccess:()=>{E({description:"Membership renewal submitted, pending admin approval..."}),l(),u()}})};return e.jsx(B,{open:a,onOpenChange:l,children:e.jsxs(H,{className:"max-w-4xl w-[95vw] mx-auto rounded-lg p-6 shadow-lg overflow-auto max-h-[95vh]",children:[e.jsxs(X,{children:[e.jsx(Z,{className:"text-xl font-semibold",children:"Membership Renewal"}),e.jsxs(re,{className:"text-sm",children:["Renew membership package of ",e.jsx("strong",{children:r.name}),"."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs(w,{children:[e.jsx(S,{children:e.jsx(D,{className:"text-lg font-semibold",children:"Renewal Summary"})}),e.jsxs(M,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Expiry Date"}),e.jsx("strong",{children:r.payment_expiry_date})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monthly Fees"}),e.jsxs("span",{children:["Rs ",x]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Monthly Fees"}),e.jsxs("span",{children:["Rs ",O]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gross Amount"}),e.jsxs("span",{children:["Rs ",I]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- Rs ",L]})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Net Amount"}),e.jsxs("span",{children:["Rs ",U]})]})]})]}),e.jsxs(w,{children:[e.jsx(S,{className:"pb-0"}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 bg-muted p-3 rounded-lg",children:[e.jsx("div",{className:"",children:e.jsx("img",{className:"size-[40px] rounded-full object-cover",src:r.photo,alt:r.name})}),e.jsxs("div",{className:"grow flex flex-col",children:[e.jsx("span",{className:"font-semibold font-lg",children:r.name}),e.jsx("small",{className:"font-xs",children:r.phone})]})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Renewal Period (in months)"}),e.jsxs(y,{value:t.selected_months.toString(),onValueChange:m=>b("selected_months",Number(m)),children:[e.jsx(N,{id:"months",children:e.jsx(v,{placeholder:"Select duration"})}),e.jsxs(_,{children:[e.jsx(i,{value:"1",children:"1 Month"}),e.jsx(i,{value:"3",children:"3 Months"}),e.jsx(i,{value:"6",children:"6 Months"}),e.jsx(i,{value:"12",children:"1 Year"})]})]}),e.jsx(o,{message:j.selected_months})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Payment Proof (Optional)"}),e.jsx(h,{type:"file",onChange:m=>b("payment_proof",m.target.files?m.target.files[0]:null)}),e.jsx(o,{message:j.payment_proof})]}),e.jsx(f,{type:"submit",disabled:g,children:g?"Processing...":"Confirm Renewal"})]})]})]})]})]})})},de=oe;function Ee(){const[r,a]=c.useState(""),[l,t]=c.useState(null),b=new URLSearchParams(window.location.search),[u,j]=c.useState(!1),[C,g]=c.useState(b.get("form")==="renew"),P=async()=>{try{const x=await ae.get(`/get-renewal-form/${r}`);x.data.member?(t(x.data.member),g(!1),j(!0)):E({description:"Member not found or no active membership"})}catch{E({description:"Error fetching member data"})}};return e.jsxs(te,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!0,children:[e.jsxs("div",{className:"w-full h-screen bg-no-repeat bg-cover relative",style:{backgroundImage:"url('gym-bg.jpg')"},children:[e.jsx(se,{title:"Welcome to Chitwangym"}),e.jsx("div",{className:"absolute w-full min-h-full bg-black/60 text-white"}),e.jsxs("div",{className:"relative container min-h-full flex flex-col",children:[e.jsxs("div",{className:"py-7 flex justify-between items-center",children:[e.jsx($,{href:"/",className:"flex items-center py-3 px-5 w-fit",children:e.jsx("span",{className:"text-xl sm:text-2xl text-white font-semibold",children:"Nexis Fitness"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx($,{href:"/login",className:"text-sm text-gray-200 hover:underline",children:"Go to Admin Area"})})]}),e.jsx("div",{className:"grow flex items-center justify-center",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl text-center text-white font-extrabold uppercase",children:"Welcome to Nexis Fitness"}),e.jsx("h3",{className:"text-white/75 text-center capitalize md:text-lg lg:text-xl font-semibold",children:"Your Fitness Journey Starts Here. Let's Achieve Your Goals Together."}),e.jsxs("div",{className:"flex gap-2 mx-auto justify-center",children:[e.jsx(ce,{})," ",e.jsxs(B,{open:C,onOpenChange:g,children:[e.jsxs(Q,{children:[e.jsx(f,{className:"md:hidden",size:"sm",children:"Renew Membership"}),e.jsx(f,{className:"hidden md:block",children:"Renew Membership"})]}),e.jsxs(H,{className:"space-y-1",children:[e.jsx("h2",{className:"font-bold",children:"Enter Phone Number to Renew"}),e.jsx(h,{type:"number",className:"flex-grow",onChange:x=>a(x.target.value),placeholder:"Phone number"}),e.jsx("div",{className:"text-end",children:e.jsx(f,{className:"me-auto",onClick:P,children:"Submit Renewal Request"})})]})]})]})]})})]})]}),e.jsx(ne,{}),l&&e.jsx(de,{member:l,open:u,onClose:()=>j(!1)})]})}export{Ee as default};
