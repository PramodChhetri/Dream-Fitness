import{r as p,m as r,j as a,W as H,d as J}from"./app-3SIRTf-5.js";import{I as E}from"./InputError-BCZ6gpxT.js";import{B as K}from"./button-mE5Zer4v.js";import{L as _}from"./label-sM4Vfyun.js";import{T as A}from"./textarea-BAe97Pwd.js";import{b as G,_ as d}from"./index-YuXTghCy.js";import{a as T,b as Q,$ as X}from"./index-Cqu9cwS9.js";import{$ as N,h as Z,i as ee}from"./dropdown-menu-CVU-zAeu.js";import{a as te}from"./index-v8WOfFnQ.js";import{c as P}from"./utils-C-Zvzyq5.js";import{c as ae}from"./index-Bb4qSo10.js";import{A as oe}from"./AuthenticatedLayout-CJJr-twT.js";import"./index-C3fbTtBW.js";import"./index-BwJKMgpa.js";import"./index-BVcS-tUL.js";import"./x-ZThs6_Gk.js";import"./createLucideIcon-a0XJ54KJ.js";import"./GlobalLayout-CMcNHiVS.js";import"./toaster-Dw7QYiKI.js";import"./use-toast-D1Qu1tBf.js";import"./card-CBtJbqk1.js";import"./sheet-Dncmpnv9.js";import"./index-SipnJt1m.js";const S=p.forwardRef((e,n)=>{const{pressed:s,defaultPressed:t=!1,onPressedChange:o,...c}=e,[l=!1,i]=T({prop:s,onChange:o,defaultProp:t});return p.createElement(G.button,d({type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":e.disabled?"":void 0},c,{ref:n,onClick:Q(e.onClick,()=>{e.disabled||i(!l)})}))}),I=S,h="ToggleGroup",[V,Ve]=X(h,[N]),R=N(),se=r.forwardRef((e,n)=>{const{type:s,...t}=e;if(s==="single"){const o=t;return r.createElement(re,d({},o,{ref:n}))}if(s==="multiple"){const o=t;return r.createElement(ne,d({},o,{ref:n}))}throw new Error(`Missing prop \`type\` expected on \`${h}\``)}),[w,F]=V(h),re=r.forwardRef((e,n)=>{const{value:s,defaultValue:t,onValueChange:o=()=>{},...c}=e,[l,i]=T({prop:s,defaultProp:t,onChange:o});return r.createElement(w,{scope:e.__scopeToggleGroup,type:"single",value:l?[l]:[],onItemActivate:i,onItemDeactivate:r.useCallback(()=>i(""),[i])},r.createElement(k,d({},c,{ref:n})))}),ne=r.forwardRef((e,n)=>{const{value:s,defaultValue:t,onValueChange:o=()=>{},...c}=e,[l=[],i]=T({prop:s,defaultProp:t,onChange:o}),f=r.useCallback(g=>i((m=[])=>[...m,g]),[i]),x=r.useCallback(g=>i((m=[])=>m.filter(C=>C!==g)),[i]);return r.createElement(w,{scope:e.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:f,onItemDeactivate:x},r.createElement(k,d({},c,{ref:n})))}),[ce,le]=V(h),k=r.forwardRef((e,n)=>{const{__scopeToggleGroup:s,disabled:t=!1,rovingFocus:o=!0,orientation:c,dir:l,loop:i=!0,...f}=e,x=R(s),g=te(l),m={role:"group",dir:g,...f};return r.createElement(ce,{scope:s,rovingFocus:o,disabled:t},o?r.createElement(Z,d({asChild:!0},x,{orientation:c,dir:g,loop:i}),r.createElement(G.div,d({},m,{ref:n}))):r.createElement(G.div,d({},m,{ref:n})))}),y="ToggleGroupItem",ie=r.forwardRef((e,n)=>{const s=F(y,e.__scopeToggleGroup),t=le(y,e.__scopeToggleGroup),o=R(e.__scopeToggleGroup),c=s.value.includes(e.value),l=t.disabled||e.disabled,i={...e,pressed:c,disabled:l},f=r.useRef(null);return t.rovingFocus?r.createElement(ee,d({asChild:!0},o,{focusable:!l,active:c,ref:f}),r.createElement(M,d({},i,{ref:n}))):r.createElement(M,d({},i,{ref:n}))}),M=r.forwardRef((e,n)=>{const{__scopeToggleGroup:s,value:t,...o}=e,c=F(y,s),l={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},i=c.type==="single"?l:void 0;return r.createElement(S,d({},i,o,{ref:n,onPressedChange:f=>{f?c.onItemActivate(t):c.onItemDeactivate(t)}}))}),D=se,U=ie,z=ae("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),de=p.forwardRef(({className:e,variant:n,size:s,...t},o)=>a.jsx(I,{ref:o,className:P(z({variant:n,size:s,className:e})),...t}));de.displayName=I.displayName;const B=p.createContext({size:"default",variant:"default"}),L=p.forwardRef(({className:e,variant:n,size:s,children:t,...o},c)=>a.jsx(D,{ref:c,className:P("flex items-center justify-center gap-1",e),...o,children:a.jsx(B.Provider,{value:{variant:n,size:s},children:t})}));L.displayName=D.displayName;const b=p.forwardRef(({className:e,children:n,variant:s,size:t,...o},c)=>{const l=p.useContext(B);return a.jsx(U,{ref:c,className:P(z({variant:l.variant||s,size:l.size||t}),e),...o,children:n})});b.displayName=U.displayName;const Re=({auth:e,flash:n,sms_balance:s})=>{const{data:t,setData:o,errors:c,post:l,processing:i}=H({contacts:[],message:""}),[f,x]=p.useState(1),[g,m]=p.useState(160);p.useState(0);const C=u=>{const v={all:"/all-contacts",active:"/active-contacts",lifetime:"/lifetime-members-contacts",yearly:"/yearly-members-contacts",expired:"/expired-contacts"}[u];v&&J.get(v).then(j=>{const Y=j.data.map(W=>W.phone);o("contacts",Y)}).catch(j=>{console.error("There was an error fetching the contacts!",j)})},q=u=>{const $=u.length,v=Math.max(Math.ceil($/160),1);x(v),m(v*160)},O=u=>{if(!t.contacts.length||!t.message.trim()){console.error("Contacts and Message are required");return}console.log(t),l("/send-message")};return a.jsxs(oe,{user:e.user,children:[a.jsxs("header",{className:"flex justify-between",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Send Message"}),s<0?a.jsx("span",{className:"text-muted-foreground",children:"SMS service unavailable"}):a.jsxs("span",{className:"text-card-foreground",children:["Balance: Rs ",s]})]}),a.jsxs("form",{className:"space-y-3",onSubmit:O,children:[a.jsxs(L,{type:"single",variant:"outline",onValueChange:u=>C(u),children:[a.jsx(b,{value:"all","aria-label":"All Users",children:"All"}),a.jsx(b,{value:"active","aria-label":"All Active Users",children:"Active"}),a.jsx(b,{value:"lifetime","aria-label":"All Lifetime Users",children:"Lifetime Members"}),a.jsx(b,{value:"yearly","aria-label":"All Yearly Users",children:"Yearly Members"}),a.jsx(b,{value:"expired","aria-label":"All Expired Users",children:"Expired Members"})]}),a.jsxs("div",{children:[a.jsx(_,{htmlFor:"contacts",children:"Contacts"}),a.jsx(A,{id:"contacts",required:!0,value:t.contacts.join(", "),onChange:u=>o("contacts",u.target.value.split(",").map($=>$.trim())),placeholder:"Comma Separated contact numbers"}),a.jsx(E,{message:c.contacts})]}),a.jsxs("div",{children:[a.jsx(_,{htmlFor:"message",children:"Message"}),a.jsx(A,{id:"message",required:!0,value:t.message,onChange:u=>{o("message",u.target.value),q(u.target.value)},placeholder:"Enter message to the members"}),a.jsx(E,{message:c.message}),a.jsxs("div",{className:"text-muted-foreground mt-2 flex justify-between",children:[a.jsxs("span",{children:["Total Pages : ",f," - (Rs ",(f*t.contacts.length*1.4).toFixed(2),")"]}),a.jsxs("span",{children:[t.message.length," / ",g]})]})]}),a.jsx(K,{type:"submit",disabled:s<=0,children:"Send SMS Alert "})]})]})};export{Re as default};
