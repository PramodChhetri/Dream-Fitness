import{W as C,r as c,j as e}from"./app-BbJUaZt7.js";import{I as l}from"./InputError-NIrKKB-2.js";import{B as M}from"./button-UwysrHzP.js";import{L as p}from"./label-DsFCVgVZ.js";import{T as d}from"./textarea-iPGzJA0z.js";import{A as N}from"./AuthenticatedLayout-DVjcb06X.js";import y from"./FilterPopover-t5U7Vkl2.js";import"./index-8PO45I_3.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./index-B95Fhcwf.js";import"./GlobalLayout-DH3BRBnV.js";import"./toaster-D0flyv3P.js";import"./index-DJQKv4up.js";import"./index-CXD2mk9O.js";import"./x-Dzg8clAH.js";import"./createLucideIcon-CPw1ASD4.js";import"./use-toast-DB_HyPaF.js";import"./card-BdKu3Mnk.js";import"./sheet-BMmGqGqr.js";import"./index-BAXoe19z.js";import"./index-C1KCpwI9.js";import"./dropdown-menu-B8xy7AqL.js";import"./index-BM2NL8vz.js";import"./check-DjI-pqQE.js";import"./input-Cqv19wrC.js";import"./popover-DSf0TO8L.js";import"./segmented-control-zaJcV9po.js";import"./select-Dfz_2K3P.js";import"./filter-DPe8JBzu.js";const re=({auth:h,sms_balance:r,packages:g,contacts:x})=>{const{data:t,setData:o,errors:i,post:u,processing:P}=C({contacts:x||[],message:""}),[m,j]=c.useState(1),[f,v]=c.useState(160),S=s=>{const a=s.length,n=Math.max(Math.ceil(a/160),1);j(n),v(n*160)},b=s=>{if(!t.contacts.length||!t.message.trim()){console.error("Contacts and Message are required");return}console.log(t),u("/send-message")};return e.jsxs(N,{user:h.user,children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Send Message"}),r<0?e.jsx("span",{className:"text-muted-foreground",children:"SMS service unavailable"}):e.jsxs("span",{className:"text-card-foreground",children:["Balance: Rs ",r]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx(y,{packages:g})}),e.jsxs("form",{className:"space-y-3",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"contacts",children:"Contacts"}),e.jsx(d,{id:"contacts",required:!0,value:t.contacts.join(", "),onChange:s=>o("contacts",s.target.value.split(",").map(a=>a.trim())),placeholder:"Comma Separated contact numbers"}),e.jsx(l,{message:i.contacts})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"message",children:"Message"}),e.jsx(d,{id:"message",required:!0,value:t.message,onChange:s=>{o("message",s.target.value),S(s.target.value)},placeholder:"Enter message to the members"}),e.jsx(l,{message:i.message}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex justify-between",children:[e.jsxs("span",{children:["Total Pages : ",m," - (Rs ",(m*t.contacts.length*1.4).toFixed(2),")"]}),e.jsxs("span",{children:[t.message.length," / ",f]})]})]}),e.jsx(M,{type:"submit",disabled:r<=0,children:"Send SMS Alert "})]})]})};export{re as default};
