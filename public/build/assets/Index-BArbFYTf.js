import{r as b,j as e,Y as k,y as R,W as E}from"./app-3SIRTf-5.js";import{A as F}from"./AuthenticatedLayout-CJJr-twT.js";import{C as w,a as V,b as H,c as I,d as p}from"./card-CBtJbqk1.js";import{T as N,a as _,b as c,c as r,d as D,e as n}from"./table-EyrCOfFI.js";import{T as U,a as z,b as f,L as $}from"./loader-CyaN__OE.js";import{B as T}from"./button-mE5Zer4v.js";import q from"./TransactionDialog-BhR05lp3.js";import{B as u}from"./badge-N3QcmQek.js";import{P as W,a as Y,b as G}from"./popover-jqHnf68I.js";import{L as M}from"./label-sM4Vfyun.js";import{I as C}from"./input-B_VqwVNS.js";import{F as J}from"./filter-DydOf_4B.js";import{f as v}from"./format-CE4V3joc.js";import"./GlobalLayout-CMcNHiVS.js";import"./toaster-Dw7QYiKI.js";import"./index-YuXTghCy.js";import"./index-Cqu9cwS9.js";import"./index-BwJKMgpa.js";import"./x-ZThs6_Gk.js";import"./createLucideIcon-a0XJ54KJ.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./use-toast-D1Qu1tBf.js";import"./sheet-Dncmpnv9.js";import"./index-SipnJt1m.js";import"./index-BVcS-tUL.js";import"./dropdown-menu-CVU-zAeu.js";import"./index-v8WOfFnQ.js";import"./index-C3fbTtBW.js";import"./InputError-BCZ6gpxT.js";import"./dialog-HXmWLQJG.js";import"./select-BAAnM0MM.js";import"./textarea-BAe97Pwd.js";function Pe({auth:l,data:s,activeTab:t}){const[a,h]=b.useState(t||"registrations"),[L,x]=b.useState(!0),S=i=>{x(!0),h(i),R.get(route("transactions.index"),{tab:i},{onFinish:()=>x(!1)})};b.useEffect(()=>{x(!1)},[]);const A=i=>{i&&(x(!0),R.visit(i,{onFinish:()=>x(!1),preserveState:!0,preserveScroll:!0}))},B=()=>{const i=new URLSearchParams(window.location.search),g=i.get("filter[startDate]")||"",y=i.get("filter[endDate]")||"",{data:d,setData:m,errors:Z}=E({startDate:g,endDate:y}),P=o=>{o.preventDefault();let j=new URLSearchParams(window.location.search);d.startDate?j.set("filter[startDate]",d.startDate):j.delete("filter[startDate]"),d.endDate?j.set("filter[endDate]",d.endDate):j.delete("filter[endDate]"),R.visit(route("transactions.index")+"?"+j.toString())};return b.useEffect(()=>{d.startDate||m("startDate",g),d.endDate||m("endDate",y)},[m,g,y]),e.jsxs(W,{children:[e.jsx(Y,{asChild:!0,children:e.jsxs(T,{variant:"secondary",className:"flex items-center",children:[e.jsx(J,{className:"size-4 me-2"})," Filter"]})}),e.jsx(G,{className:"w-fit",children:e.jsxs("form",{className:"flex gap-2 items-end",onSubmit:P,children:[e.jsxs("div",{children:[e.jsx(M,{children:"Start Date"}),e.jsx(C,{type:"date",value:d.startDate||"",onChange:o=>m("startDate",o.target.value)})]}),e.jsxs("div",{children:[e.jsx(M,{children:"End Date"}),e.jsx(C,{type:"date",value:d.endDate||"",onChange:o=>m("endDate",o.target.value)})]}),e.jsx("div",{children:e.jsx(T,{type:"submit",className:"w-full",children:"Filter"})})]})})]})};return e.jsxs(F,{user:l.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Transactions"}),children:[e.jsx(k,{title:"Transactions"}),e.jsxs(w,{children:[e.jsxs(V,{className:"flex justify-between flex-row",children:[e.jsxs("div",{children:[e.jsx(H,{children:"Transactions"}),e.jsx(I,{children:"View and manage gym transactions"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{}),e.jsx(q,{})]})]}),e.jsx(p,{children:e.jsxs(U,{value:a,onValueChange:S,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(z,{children:[e.jsx(f,{value:"registrations",children:"Registrations"}),e.jsx(f,{value:"renewals",children:"Renewals"}),e.jsx(f,{value:"lockers",children:"Lockers"}),e.jsx(f,{value:"miscellaneous",children:"Miscellaneous"})]}),e.jsxs("span",{children:["showing ",s.data.length," of ",s.total," records"]})]}),L?e.jsx("div",{className:"flex justify-center items-center my-10",children:e.jsx($,{size:"lg"})}):e.jsxs(e.Fragment,{children:[a==="registrations"&&K(s),a==="renewals"&&Q(s),a==="lockers"&&O(s),a==="miscellaneous"&&X(s),e.jsx("div",{className:"flex justify-end mt-4 space-x-2",children:s.links.map(i=>e.jsx(T,{onClick:()=>A(i.url),variant:i.active?"default":"ghost",dangerouslySetInnerHTML:{__html:i.label}},i.url))})]})]})})]})]})}function K(l){return e.jsx(p,{children:e.jsxs(N,{children:[e.jsx(_,{children:e.jsxs(c,{children:[e.jsx(r,{children:"Payment Date"}),e.jsx(r,{children:"Member Name"}),e.jsx(r,{children:"Membership Package"}),e.jsx(r,{children:"Bill No."}),e.jsx(r,{children:"Package Amount"}),e.jsx(r,{children:"Extra Discount"}),e.jsx(r,{children:"Net Amount"}),e.jsx(r,{children:"Paid Amount"}),e.jsx(r,{children:"Balance"}),e.jsx(r,{children:"Payment Mode"})]})}),e.jsx(D,{children:l.data.map(s=>{const t=Number(s.net_amount)-Number(s.paid_amount);return e.jsxs(c,{children:[e.jsx(n,{children:v(new Date(s.payment_date),"yyyy-MM-dd")}),e.jsx(n,{children:s.member.name}),e.jsx(n,{children:s.member.membership_package.package_name}),e.jsx(n,{children:e.jsx(u,{className:"text-xs",children:s.bill_number})}),e.jsxs(n,{children:["Rs ",Number(s.total_monthly_fees)+Number(s.admission_fees)-Number(s.package_discount)]}),e.jsxs(n,{children:["Rs ",Number(s.extra_discount)]}),e.jsxs(n,{children:["Rs ",Number(s.net_amount)]}),e.jsxs(n,{children:["Rs ",Number(s.paid_amount)]}),e.jsx(n,{children:t>0?e.jsxs("span",{className:"text-red-500",children:["Rs ",t," ",e.jsx("sub",{children:e.jsx("b",{children:"CR"})})]}):t<0?e.jsxs("span",{className:"text-green-500",children:["Rs ",Math.abs(t)," ",e.jsx("sup",{children:e.jsx("b",{children:"ADV"})})]}):e.jsx("span",{children:"Rs 0"})}),e.jsx(n,{children:s.payment_mode})]},s.id)})})]})})}function O(l){return e.jsx(p,{children:e.jsxs(N,{children:[e.jsx(_,{children:e.jsxs(c,{children:[e.jsx(r,{children:"Payment Date"}),e.jsx(r,{children:"Member Name"}),e.jsx(r,{children:"Locker No."}),e.jsx(r,{children:"Duration"}),e.jsx(r,{children:"Bill Number"}),e.jsx(r,{children:"Locker Charge"}),e.jsx(r,{children:"Locker Discount"}),e.jsx(r,{children:"Net Amount"}),e.jsx(r,{children:"Paid Amount"}),e.jsx(r,{children:"Balance"}),e.jsx(r,{children:"Payment Mode"})]})}),e.jsx(D,{children:l.data.map(s=>{var h;const t=Number(s.net_amount)-Number(s.paid_amount),a=s.total_months===1?"1 Month":`${s.total_months} Months`;return e.jsxs(c,{children:[e.jsx(n,{children:new Date(s.payment_date).toLocaleDateString()}),e.jsx(n,{children:((h=s.member)==null?void 0:h.name)||"Unknown"}),e.jsx(n,{children:e.jsx(u,{variant:"outline",className:"text-primary border-primary",children:e.jsx("strong",{children:s.locker_number})})}),e.jsx(n,{children:a})," ",e.jsx(n,{children:e.jsx(u,{children:s.bill_number})}),e.jsxs(n,{children:["Rs ",Number(s.locker_charge)]}),e.jsxs(n,{children:["Rs ",Number(s.locker_discount)]}),e.jsxs(n,{children:["Rs ",Number(s.net_amount)]}),e.jsxs(n,{children:["Rs ",Number(s.paid_amount)]}),e.jsx(n,{children:t>0?e.jsxs("span",{className:"text-red-500",children:["Rs ",t," ",e.jsx("sub",{children:e.jsx("b",{children:"CR"})})," "]}):t<0?e.jsxs("span",{className:"text-green-500",children:["Rs ",Math.abs(t)," ",e.jsx("sup",{children:e.jsx("b",{children:"ADV"})})," "]}):e.jsx("span",{children:"Rs 0"})}),e.jsx(n,{children:s.payment_mode})," "]},s.id)})})]})})}function Q(l){return e.jsx(p,{children:e.jsxs(N,{children:[e.jsx(_,{children:e.jsxs(c,{children:[e.jsx(r,{children:"Payment Date"}),e.jsx(r,{children:"Member Name"}),e.jsx(r,{children:"Membership Package"}),e.jsx(r,{children:"Duration"}),e.jsx(r,{children:"Bill No."}),e.jsx(r,{children:"Package Amount"}),e.jsx(r,{children:"Extra Discount"}),e.jsx(r,{children:"Net Amount"}),e.jsx(r,{children:"Paid Amount"}),e.jsx(r,{children:"Payment Mode"}),e.jsx(r,{children:"Balance"})]})}),e.jsx(D,{children:l.data.map(s=>{const t=Number(s.monthly_fees)*Number(s.total_months)-Number(s.extra_discount)-Number(s.package_discount)-Number(s.paid_amount),a=s.total_months===1?"1 Month":`${s.total_months} Months`;return e.jsxs(c,{children:[e.jsx(n,{children:v(new Date(s.payment_date).toLocaleDateString(),"yyyy-MM-dd")}),e.jsx(n,{children:s.member.name}),e.jsx(n,{children:s.member.membership_package.package_name}),e.jsx(n,{children:a})," ",e.jsx(n,{children:e.jsx(u,{className:"text-xs",children:s.bill_number})}),e.jsxs(n,{children:["Rs ",Number(s.monthly_fees)*Number(s.total_months)-Number(s.package_discount)]}),e.jsxs(n,{children:["Rs ",Number(s.extra_discount)]}),e.jsxs(n,{children:["Rs ",Number(s.net_amount)]}),e.jsxs(n,{children:["Rs ",Number(s.paid_amount)]}),e.jsx(n,{children:s.payment_mode}),e.jsx(n,{children:t>0?e.jsxs("span",{className:"text-red-500",children:["Rs ",t," ",e.jsx("sub",{children:e.jsx("b",{children:"CR"})})]}):t<0?e.jsxs("span",{className:"text-green-500",children:["Rs ",Math.abs(t)," ",e.jsx("sup",{children:e.jsx("b",{children:"ADV"})})]}):e.jsx("span",{children:"Rs 0"})})]},s.id)})})]})})}function X(l){return e.jsx(p,{children:e.jsxs(N,{children:[e.jsx(_,{children:e.jsxs(c,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Total"}),e.jsx(r,{children:"Paid"}),e.jsx(r,{children:"Credit"}),e.jsx(r,{children:"Transaction Type"}),e.jsx(r,{children:"Bill No."}),e.jsx(r,{children:"Payment Mode"}),e.jsx(r,{children:"Description"})]})}),e.jsx(D,{children:l.data.map(s=>{var t,a,h;return e.jsxs(c,{children:[e.jsx(n,{children:v(new Date(s.payment_date).toLocaleDateString(),"yyyy-MM-dd")}),e.jsx(n,{children:s.name||((t=s.member)==null?void 0:t.name)}),e.jsxs(n,{children:["Rs ",s.total_amount]}),e.jsxs(n,{children:["Rs ",s.paid_amount]}),e.jsxs(n,{children:["Rs ",s.total_amount-s.paid_amount]}),e.jsx(n,{children:s.transaction_type}),e.jsx(n,{children:e.jsx(u,{children:s.bill_number||"N/A"})}),e.jsx(n,{children:s.payment_mode}),e.jsxs(n,{children:[((a=s==null?void 0:s.description)==null?void 0:a.length)>0?s.description.substring(0,50):"",((h=s==null?void 0:s.description)==null?void 0:h.length)>50?"...":""]})]},s.id)})})]})})}export{Pe as default};
