import{W as C,r as c,j as e}from"./app-MbUP1EQI.js";import{I as l}from"./InputError-BAx_On6R.js";import{B as M}from"./button-CzAhYwEo.js";import{L as p}from"./label-DUXNj4de.js";import{T as d}from"./textarea-BUeE_V5k.js";import{A as N}from"./AuthenticatedLayout-Bj72-yi9.js";import y from"./FilterPopover-DIW1WJzm.js";import"./index-DHdUJXuL.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./index-50k3gDpb.js";import"./GlobalLayout-CpXZCQPR.js";import"./toaster-WtJ9HbpD.js";import"./index-ynk8XwVw.js";import"./index-CrW0pUbx.js";import"./x-BkjT11oR.js";import"./createLucideIcon-DhDSKE00.js";import"./use-toast-BPI7qPE7.js";import"./card-K8Ff7zdG.js";import"./sheet-CTEoYkxo.js";import"./index-DrAYGk9J.js";import"./index-B2Mnvzit.js";import"./dropdown-menu-B5cVrezE.js";import"./index-BBBSSME7.js";import"./check-BQwKtKwj.js";import"./input-BPMtujBP.js";import"./popover-BLZzaaGK.js";import"./segmented-control-C3eN58Ia.js";import"./select-DuLVWfqX.js";import"./filter-VlUK-Cb0.js";const re=({auth:h,sms_balance:r,packages:g,contacts:x})=>{const{data:t,setData:o,errors:i,post:u,processing:P}=C({contacts:x||[],message:""}),[m,j]=c.useState(1),[f,v]=c.useState(160),S=s=>{const a=s.length,n=Math.max(Math.ceil(a/160),1);j(n),v(n*160)},b=s=>{if(!t.contacts.length||!t.message.trim()){console.error("Contacts and Message are required");return}console.log(t),u("/send-message")};return e.jsxs(N,{user:h.user,children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Send Message"}),r<0?e.jsx("span",{className:"text-muted-foreground",children:"SMS service unavailable"}):e.jsxs("span",{className:"text-card-foreground",children:["Balance: Rs ",r]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx(y,{packages:g})}),e.jsxs("form",{className:"space-y-3",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"contacts",children:"Contacts"}),e.jsx(d,{id:"contacts",required:!0,value:t.contacts.join(", "),onChange:s=>o("contacts",s.target.value.split(",").map(a=>a.trim())),placeholder:"Comma Separated contact numbers"}),e.jsx(l,{message:i.contacts})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"message",children:"Message"}),e.jsx(d,{id:"message",required:!0,value:t.message,onChange:s=>{o("message",s.target.value),S(s.target.value)},placeholder:"Enter message to the members"}),e.jsx(l,{message:i.message}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex justify-between",children:[e.jsxs("span",{children:["Total Pages : ",m," - (Rs ",(m*t.contacts.length*1.4).toFixed(2),")"]}),e.jsxs("span",{children:[t.message.length," / ",f]})]})]}),e.jsx(M,{type:"submit",disabled:r<=0,children:"Send SMS Alert "})]})]})};export{re as default};
