import{W as C,r as c,j as e}from"./app-D3xhd7x4.js";import{I as l}from"./InputError-DKuUmmK1.js";import{B as M}from"./button-kSVH6inc.js";import{L as p}from"./label-B7b8UO_Y.js";import{T as d}from"./textarea-lKWceivU.js";import{A as N}from"./AuthenticatedLayout-BNoa_9Pl.js";import y from"./FilterPopover-DV6NP_lm.js";import"./index-BN1U6-Hz.js";import"./index-Bb4qSo10.js";import"./utils-C-Zvzyq5.js";import"./index-BkFfMWl8.js";import"./GlobalLayout-CXzBAGyO.js";import"./toaster-FnjXybNn.js";import"./index-CHWu3Xan.js";import"./index-DjfCHU90.js";import"./x-n02M-ldN.js";import"./createLucideIcon-RljSjpz3.js";import"./use-toast-CeK-EtdP.js";import"./card-XJZW572Q.js";import"./sheet-KrgZSENa.js";import"./index-BA9ojx9c.js";import"./index-D_4hUVl6.js";import"./dropdown-menu-DbrUI8SI.js";import"./index-CQ59I0Dq.js";import"./check-CcE03I2l.js";import"./input-B5jvm_hA.js";import"./popover-CpbQxDBy.js";import"./segmented-control-C8-3Qy4a.js";import"./select-U6-rirhH.js";import"./filter-DWFBunVn.js";const re=({auth:h,sms_balance:r,packages:g,contacts:x})=>{const{data:t,setData:o,errors:i,post:u,processing:P}=C({contacts:x||[],message:""}),[m,j]=c.useState(1),[f,v]=c.useState(160),S=s=>{const a=s.length,n=Math.max(Math.ceil(a/160),1);j(n),v(n*160)},b=s=>{if(!t.contacts.length||!t.message.trim()){console.error("Contacts and Message are required");return}console.log(t),u("/send-message")};return e.jsxs(N,{user:h.user,children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Send Message"}),r<0?e.jsx("span",{className:"text-muted-foreground",children:"SMS service unavailable"}):e.jsxs("span",{className:"text-card-foreground",children:["Balance: Rs ",r]})]}),e.jsx("div",{className:"ms-auto",children:e.jsx(y,{packages:g})}),e.jsxs("form",{className:"space-y-3",onSubmit:b,children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"contacts",children:"Contacts"}),e.jsx(d,{id:"contacts",required:!0,value:t.contacts.join(", "),onChange:s=>o("contacts",s.target.value.split(",").map(a=>a.trim())),placeholder:"Comma Separated contact numbers"}),e.jsx(l,{message:i.contacts})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"message",children:"Message"}),e.jsx(d,{id:"message",required:!0,value:t.message,onChange:s=>{o("message",s.target.value),S(s.target.value)},placeholder:"Enter message to the members"}),e.jsx(l,{message:i.message}),e.jsxs("div",{className:"text-muted-foreground mt-2 flex justify-between",children:[e.jsxs("span",{children:["Total Pages : ",m," - (Rs ",(m*t.contacts.length*1.4).toFixed(2),")"]}),e.jsxs("span",{children:[t.message.length," / ",f]})]})]}),e.jsx(M,{type:"submit",disabled:r<=0,children:"Send SMS Alert "})]})]})};export{re as default};
